#!/usr/bin/env php
<?php

# find and require the autoloader
call_user_func(function() {
    for ($i=4; $i>0; $i--) {
        foreach (['bootstrap.php', 'autoload.php'] as $filename) {
            $path = __DIR__."/".str_repeat("../", $i).$filename;
            if (file_exists($path)) {
                require_once $path;
                return;
            }
        }
    }
    echo "failed to locate bootstrap/autoload script\n";
    exit(1);
});


$controller = new CliController($argv);
$action = new \sndsgd\http\action\LocateRouteAction($controller);
$result = $action->execute();
$response = $controller->createResponse($result);
$response->render();
